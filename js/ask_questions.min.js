"use strict";function messagedisplay(c,b,a){if(a===0){}$("#messagedisplay_modal .modal-title").text(b);$("#messagedisplay_modal .modal-body").html(c);$("#messagedisplay_modal").modal("show");setTimeout(function(){$("#nextbutton").focus()},400)}function show_loader(b,a){setTimeout(function(){if(a=="show"){$("#loading").show();$("#custommessage").text(b)}else{$("#loading").hide();$("#custommessage").text("")}},0)}function isJSON(a){try{a=a.trim();JSON.parse(a)}catch(b){return false}return true}function show_validation_message(c,b,a){if(a=="destroy"){$(c).find(".errormsg").remove()}else{if($(c).parent().find(".errormsg").length===0){$(c).parent().prepend('<div class="errormsg">'+b+"</div>")}}}function create_imagedata(c){var a=new FormData();var b=$("input"+c);if(b.length>0){b.each(function(d,e){if(e.value!==""){a.append(e.id,e.files[0])}})}else{a.append(c,"")}return a}$("body").on("keyup","input[data-pattern=email]",function(){if($(this).val()===""||$(this).val()==" "){$(this).parent().removeClass("ok error").addClass("er")}else{var a=/^[a-zA-Z0-9\._]{1,}@[a-zA-Z0-9]{2,}\.[a-zA-Z0-9\.]{2,}$/;if(a.test($(this).val())){$(this).parent().addClass("ok").removeClass("er error");show_validation_message($(this).parent()[0],"","destroy")}else{$(this).parent().removeClass("ok error").addClass("er")}}}).on("blur","input[data-pattern=email]",function(){if($(this).val()===""||$(this).val()==" "){$(this).parent().removeClass("ok error").addClass("er")}else{var a=/^(([^<>()[\]\\.,;:\s@\"+]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(a.test($(this).val())){$(this).parent().addClass("ok").removeClass("er error");console.log("asd");show_validation_message($(this).parent()[0],"","destroy")}else{$(this).parent().removeClass("ok error").addClass("er")}}});$("body").on("keydown","input[data-pattern^=tel]",function(a){if($.inArray(a.keyCode,[46,8,9,27,13,110,190])!==-1||(a.keyCode==65&&a.ctrlKey===true)||(a.keyCode>=35&&a.keyCode<=40)){return}if((a.shiftKey||(a.keyCode<48||a.keyCode>57))&&(a.keyCode<96||a.keyCode>105)){a.preventDefault()}else{if($(this).val().length==9){$(this).parent().addClass("ok").removeClass("er");show_validation_message($(this).parent()[0],"","destroy")}else{if($(this).val().length<10){$(this).parent().removeClass("ok").addClass("er")}else{if($(this).val().length>=10){a.preventDefault()}else{}}}}}).on("blur","input[data-pattern=tel]",function(){var a=$(this).val();if($(this).hasClass("optional")){if($(this).val().length>0){if($(this).val().length==10){$(this).parent().addClass("ok").removeClass("er");show_validation_message($(this).parent()[0],"","destroy")}else{$(this).parent().addClass("er").removeClass("ok")}}}else{if(a.length==10){$(this).parent().removeClass("er").addClass("ok")}else{$(this).parent().removeClass("ok").addClass("er")}}});$("body").on("keyup","input[data-required=yes],textarea[data-required=yes]",function(){if($(this).val()===""||$(this).val()==" "){$(this).parent().removeClass("ok").addClass("er")}else{$(this).parent().removeClass("er").addClass("ok");show_validation_message($(this).parent()[0],"","destroy")}}).on("blur","input[data-required=yes]",function(){if($(this).val()===""||$(this).val()==" "){$(this).parent().removeClass("ok").addClass("er")}else{$(this).parent().removeClass("er").addClass("ok");show_validation_message($(this).parent()[0],"","destroy")}});$("body").on("keyup blur","input[data-pattern=date]",function(){console.log("data");if($(this).val()===""||$(this).val()==" "){$(this).parent().removeClass("ok error").addClass("er")}else{var a=/^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[012])\/(19|20)\d\d+$/;if(!a.test($(this).val())){$(this).parent().removeClass("ok error").addClass("er")}else{var j=new Date();var g=j.getFullYear();var d=j.getDate();var e=j.getMonth()+1;var i=d+"/"+e+"/"+g;console.log(i);var h=$("#dob_num").val();var f=moment(i,"DD-MM-YYYY");var b=moment(h,"DD-MM-YYYY");var c=b.diff(f);if(c<=0){$(this).parent().addClass("ok").removeClass("er error");console.log("asd");show_validation_message($(this).parent()[0],"","destroy")}else{$(this).parent().removeClass("ok error").addClass("er")}}}});$("#helpinfo1").click(function(){$("#Question").val("").parent().removeClass("er");$("#email_id").val("").parent().removeClass("er");$("#p_details").val("").parent().removeClass("er");$("#p_fname").val("").parent().removeClass("er");$("#p_lastnm").val("").parent().removeClass("er");$("#dob_num").val("").parent().removeClass("er");$("#email_id").val("").parent().removeClass("er");$("#mob_no").val("").parent().removeClass("er");$("#verification_patient").prop("checked",false);$(".popover").remove()});$("body").on("click","#Submit_doctor_info",function(j){j.preventDefault();if($("#infocontent1 .er").length>0){$("#infocontent1 .er").first().focus()}else{var c=$(this).closest("form").prop("action");var n=$(this).closest("form").find("#doctor").prop("value");var a=$("#Question").val();var i=$("#p_details").val();var b=$("#p_fname").val();var f=$("#p_lastnm").val();var l=$("input[name=sex]:checked").val();var k=$("input[name=visited]:checked").val();var g=$("#dob_num").val();var d=$("#email_id").val();var m=$("#mob_no").val();show_loader("","show");var h={doctor:n,Question:a,email_id:d,p_details:i,p_fname:b,p_lastnm:f,mob_no:m,dob_num:g,visited:k,sex:l,};if($("#verification_patient").is(":checked")){h.verification_patient=1}$.ajax({url:c,type:"POST",data:h,cache:false,}).done(function(o){show_loader("","hide");if(isJSON(o)){o=JSON.parse(o);if(typeof o.Success!=="undefined"){$("#padientedu_popup").modal("hide");messagedisplay(o.Success,"Success",0)}else{if(typeof o.Error!="undefined"){messagedisplay(o.Error,"Error",0)}else{for(var e in o){if(o[e].er===""){$("#"+e).val(o[e].pd).parent().removeClass("er")}else{$("#"+e).parent().addClass("er");$("#verification_patient").parent().removeClass("er")}}if($("#verification_patient").is(":checked")){$("#"+e).val(o[e].pd).parent().removeClass("er")}else{$("#"+e).val(o[e].pd).popover({placement:"top",content:o[e].er}).popover("show")}}}}}).error(function(e){messagedisplay(e.Error,"Error",0)})}});$("body").on("keyup","input[data-pattern=password_h]",function(){if($(this).val()!==""){if($(this).val().length<=4){$(this).parent().removeClass("ok").addClass("er")}else{$(this).parent().addClass("ok").removeClass("er");show_validation_message($(this).parent()[0],"","destroy")}}else{$(this).parent().removeClass("ok").addClass("er")}}).on("blur","input[data-pattern=password_h]",function(){if($(this).val()!==""){if($(this).val().length<=4){$(this).parent().removeClass("ok").addClass("er")}else{$(this).parent().addClass("ok").removeClass("er");show_validation_message($(this).parent()[0],"","destroy")}}else{$(this).parent().removeClass("ok").addClass("er")}});$("body").on("click","#helpinfo1",function(){$("#ask_question_popup").css("height","auto").show()});$("body").on("click",".question_back",function(a){a.preventDefault();$("#ask_question_popup").show();$("#patient_que_login").hide();$("#sign_up_topic").hide()});$("body").on("click","#sign_up_submit",function(c){c.preventDefault();if($("#patient_modal .er").length>0){$("#patient_modal .er").first().focus()}else{var a=$("#patient_que_form").prop("action");var b=new create_imagedata(".add_attachment");b.append("doctor",$("#doctor").val());b.append("question",$("#question").val());b.append("cid",$("#cid").val());b.append("age",$("#age").val());b.append("mob_num",$("#mob_num").val());show_loader("","show");$.ajax({url:a,type:"POST",data:b,processData:false,contentType:false,cache:false,}).done(function(e){if(isJSON(e)){e=JSON.parse(e);if(typeof e.Success!=="undefined"){$("#sign_up_topic").css("height","auto").show();$("#ask_question_popup").css("height","0px").hide()}else{if(typeof e.Error!="undefined"){messagedisplay(e.Error,"Error",0)}else{for(var d in e){if(e[d].er===""){$("#"+d).val(e[d].pd).parent().removeClass("er")}else{$("#"+d).parent().addClass("er")}}}}}show_loader("","hide")}).error(function(d){messagedisplay(d.Error,"Error",0)})}});$("body").on("change","#doctor",function(){if($(this).val()==-1){$(this).parent().addClass("er")}else{$(this).parent().removeClass("er")}});$("body").on("click","#question_sign_up",function(h){h.preventDefault();var d=$(this).closest("form").prop("action");var f=new FormData();var i=$(this).closest("form").find("input[type=hidden]");$.each(i,function(j,e){f.append(e.name,e.value)});var b=$(this).closest("form").find("input[type=text]");$.each(b,function(j,e){f.append(e.name,e.value)});var c=$(this).closest("form").find("input[type=password]");$.each(c,function(j,e){f.append(e.name,e.value)});var g=$(this).closest("form").find("input[type=checkbox]:checked");$.each(g,function(j,e){f.append(e.name,e.value)});var a=$(this).closest("form").find("input[type=radio]:checked");$.each(a,function(j,e){f.append(e.name,e.value)});show_loader("","show");$.ajax({url:d,type:"POST",data:f,cache:false,processData:false,contentType:false}).done(function(j){show_loader("","hide");if(isJSON(j)){j=JSON.parse(j);if(typeof j.Success!="undefined"){messagedisplay(j.Success,"Success",0);$(this).closest("form").find("input").val("");$("#sign_up_topic").hide();$("#patient_modal").modal("hide")}else{if(typeof j.Error!="undefined"){messagedisplay(j.Error,"Error",0)}else{for(var e in j){if(j[e].er===""){$("#"+e).val(j[e].pd).parent().removeClass("er")}else{$("#"+e).parent().addClass("er");if(e=="toi_p"){alert("check terms and condition")}show_validation_message($("#"+e)[0],j[e].er,0);show_validation_message($("#toi_p").parent()[0],"","destroy")}}}}}}).error(function(e){messagedisplay(e.Error,"Error",0)})});$("body").on("change","#toi_p",function(){$("#toi_p").parent().removeClass("er")});$("body").on("click","#login_submit",function(c){c.preventDefault();if($("#patient_modal .er").length>0){$("#patient_modal .er").first().focus()}else{var a=$("#patient_que_form").prop("action");var b=new create_imagedata(".add_attachment");b.append("doctor",$("#doctor").val());b.append("question",$("#question").val());b.append("cid",$("#cid").val());b.append("age",$("#age").val());b.append("mob_num",$("#mob_num").val());show_loader("","show");$.ajax({url:a,type:"POST",data:b,processData:false,contentType:false,cache:false,}).done(function(e){if(isJSON(e)){e=JSON.parse(e);if(typeof e.Success!=="undefined"){$("#ask_question_popup").hide();$("#patient_que_login").show()}else{if(typeof e.Error!="undefined"){messagedisplay(e.Error,"Error",0)}else{for(var d in e){if(e[d].er===""){$("#"+d).val(e[d].pd).parent().removeClass("er")}else{$("#"+d).parent().addClass("er")}}}}}show_loader("","hide")}).error(function(d){messagedisplay(d.Error,"Error",0)})}});$("body").on("change","#age",function(){var b=$(this);var a=b.val();if(a===""||isNaN(a)||a===0){b.parent().addClass("er")}else{if(a<0|a>110){b.parent().addClass("er")}else{b.parent().removeClass("er")}}});$("body").on("keyup","#mob_num",function(){var b=$(this);var a=b.val();$("#mob_num_").val(a)});$("body").on("click","#patient_btn",function(f){f.preventDefault();var b=$(this).closest("form").prop("action");var c=new FormData();var a=$(this).closest("form").find("input");var d=$(this);$.each(a,function(g,e){c.append(e.name,e.value)});show_loader("","show");$.ajax({url:b,type:"POST",data:c,cache:false,processData:false,contentType:false}).done(function(g){show_loader("","hide");if(isJSON(g)){g=JSON.parse(g);if(typeof g.Success!=="undefined"&&typeof g.Error=="undefined"){messagedisplay(g.Success,"Success",0);$(this).closest("form").find("input").val("");$("#patient_modal").modal("hide")}else{if(typeof g.Error!="undefined"){d.closest("#patient_que_login").find(".alert-danger").removeClass("hide");$("#plogin_er").text(g.Error)}else{for(var e in g){if(g[e].er===""){$("#"+e).parent().removeClass("er")}else{$("#"+e).parent().addClass("er")}}}}}}).error(function(e){messagedisplay(e.Error,"Error",0)})});$("body").on("hide.bs.modal","#patient_modal",function(){$(this).find(".er").removeClass("er");$(this).find("input[type=text]").val("");$(this).find("input[type=email]").val("");$(this).find("textarea").val("");$(this).find("input[type=password]").val("");$(this).find("input[type=checkbox]").attr("checked",false);$(this).find("#doctor").val("-1");$("#patient_que_login").hide();$("#sign_up_topic").hide();$("#plogin_er").addClass("hide");$(".add_attachment").each(function(a,b){if($(b).hasClass("new")){}else{$(b).parent().remove()}});show_loader("","show");$.ajax({url:"../destroy/session",type:"POST",cache:false,processData:false,contentType:false}).done(function(){show_loader("","hide")})});$("body").on("shown.bs.modal","#enquiry_modal",function(){$("#enquiry_modal input,#enquiry_modal select,#enquiry_modal label").each(function(a,b){if(b.nodeName=="LABEL"){var c=$(b).prop("for");$(b).prop("for",c.replace("question",""))}else{var d=$(b).prop("id");$(b).prop("id",d.replace("question",""));$(b).prop("name",$(b).prop("name").replace("question",""))}});$("#patient_modal input,#patient_modal select,#patient_modal label").each(function(a,b){if(b.nodeName=="LABEL"){var c=$(b).prop("for");$(b).prop("for",c+"enquiry")}else{var d=$(b).prop("id");$(b).prop("id",d+"enquiry");$(b).prop("name",$(b).prop("name")+"enquiry")}})});$("body").on("click","#direct_submit",function(c){c.preventDefault();if($("#patient_modal .er").length>0){$("#patient_modal .er").first().focus()}else{var a=$("#patient_que_form").data("action");var b=new create_imagedata(".add_attachment");b.append("doctor",$("#doctor").val());b.append("question",$("#question").val());b.append("cid",$("#cid").val());b.append("age",$("#age").val());b.append("mob_num",$("#mob_num").val());show_loader("","show");$.ajax({url:a,type:"POST",data:b,processData:false,contentType:false,cache:false,}).done(function(e){if(isJSON(e)){e=JSON.parse(e);if(typeof e.Success!=="undefined"){messagedisplay(e.Success,"Success",0);$("#patient_modal").modal("hide")}else{if(typeof e.Error!="undefined"){messagedisplay(e.Error,"Error",0)}else{for(var d in e){if(e[d].er===""){$("#"+d).val(e[d].pd).parent().removeClass("er")}else{$("#"+d).parent().addClass("er")}}}}}show_loader("","hide")}).error(function(d){messagedisplay(d.Error,"Error",0)})}});function isFilesAllowed(c,a){c={"image/png":1,"image/jpg":1,"image/jpeg":1,"application/pdf":1,"application/msword":1,"application/excel":1,"application/vnd.ms-excel":1,"application/vnd.openxmlformats-officedocument.wordprocessingml.document":1,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":1};if(typeof c[a.files[0].type]!="undefined"){var b={name:a.files[0].name,size:a.files[0].size/1024/1024,};return b}else{return false}}function addone_N_display(d,a,c,j,f,g){var i=c+1;var b=d+""+c;var h="#"+b;var e="#"+d+""+i;$(h).find(".delete_attached_file").removeClass("hide");if($(g).find("input").length<=5){if($(e).length>0){}else{$(g).append('<span class="attached_file pull-left btn btn-default"><input type="file" name="file[]" class="hide add_attachment new" data-max="5" data-bind="attached_files" id="'+e.replace("#","")+'" data-num="'+i+'"><label for="'+e.replace("#","")+'" class="text-sm pad5 nm pull-left">+Add attachment</label><span class="delete_attached_file text-sm pad5 btn-danger pull-left btn hide">x</span></span>')}}else{}return true}$("body").on("change",".add_attachment",function(a){if($(this).val()!==""){var b=isFilesAllowed(["png","jpeg","jpg","pdf","docx","doc","xlsx","xls"],this);console.log(b);if(b===false){$(this).val("");messagedisplay("Please select only pdf,docx,doc,xlxs,jpg and png files.","Warning",0)}else{$(this).next().next().removeClass("hide");if($(this).hasClass("new")){if(addone_N_display($(this).data("bind"),b.name,$(this).data("num"),$(this).data("max"),a,"."+$(this).data("bind")+"_outer")){$(this).removeClass("new").next().text(this.files[0].name)}}}}else{$(this).parent().remove()}});$("body").on("click",".delete_attached_file",function(){$(this).prev().prev().val("").trigger("change")});